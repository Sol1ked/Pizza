{"ast":null,"code":"import _objectSpread from\"C:/Users/aprim/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/pizza/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createSlice}from'@reduxjs/toolkit';import{getCartFromLS}from'../../utils/getCartFromLS';import{getTotalSumCart}from'../../utils/getTotalSumCart';var _getCartFromLS=getCartFromLS(),items=_getCartFromLS.items,totalPrice=_getCartFromLS.totalPrice;var initialState={totalPrice:totalPrice,items:items};var cartSlice=createSlice({name:'cart',initialState:initialState,reducers:{addProductInCart:function addProductInCart(state,action){var findItem=state.items.find(function(item){return item.id===action.payload.id;});if(findItem){findItem.count++;}else{state.items.push(_objectSpread(_objectSpread({},action.payload),{},{count:1}));}state.totalPrice=getTotalSumCart(state.items);},minusProduct:function minusProduct(state,action){var findItem=state.items.find(function(item){return item.id===action.payload;});if(findItem){findItem.count--;state.totalPrice-=findItem.price;}},removeProductFromCart:function removeProductFromCart(state,action){state.items=state.items.filter(function(item){return item.id!==action.payload.id;});state.totalPrice-=action.payload.price;},clearAllProducts:function clearAllProducts(state){state.items.length=0;state.totalPrice=0;}}});var _cartSlice$actions=cartSlice.actions,addProductInCart=_cartSlice$actions.addProductInCart,removeProductFromCart=_cartSlice$actions.removeProductFromCart,clearAllProducts=_cartSlice$actions.clearAllProducts,minusProduct=_cartSlice$actions.minusProduct;export{addProductInCart,removeProductFromCart,clearAllProducts,minusProduct};export default cartSlice.reducer;","map":{"version":3,"names":["createSlice","getCartFromLS","getTotalSumCart","_getCartFromLS","items","totalPrice","initialState","cartSlice","name","reducers","addProductInCart","state","action","findItem","find","item","id","payload","count","push","_objectSpread","minusProduct","price","removeProductFromCart","filter","clearAllProducts","length","_cartSlice$actions","actions","reducer"],"sources":["C:/Users/aprim/Рабочий стол/pizza/src/redux/cart/slice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { getCartFromLS } from '../../utils/getCartFromLS';\r\nimport { getTotalSumCart } from '../../utils/getTotalSumCart';\r\nimport { CartItem, CartSliceState, RemoveProduct } from './types';\r\n\r\nconst { items, totalPrice } = getCartFromLS();\r\n\r\nconst initialState: CartSliceState = {\r\n  totalPrice: totalPrice,\r\n  items: items,\r\n};\r\n\r\nconst cartSlice = createSlice({\r\n  name: 'cart',\r\n  initialState,\r\n  reducers: {\r\n    addProductInCart(state, action: PayloadAction<CartItem>) {\r\n      const findItem = state.items.find((item) => item.id === action.payload.id);\r\n      if (findItem) {\r\n        findItem.count++;\r\n      } else {\r\n        state.items.push({\r\n          ...action.payload,\r\n          count: 1,\r\n        });\r\n      }\r\n\r\n      state.totalPrice = getTotalSumCart(state.items);\r\n    },\r\n\r\n    minusProduct(state, action: PayloadAction<string>) {\r\n      const findItem = state.items.find((item) => item.id === action.payload);\r\n      if (findItem) {\r\n        findItem.count--;\r\n        state.totalPrice -= findItem.price;\r\n      }\r\n    },\r\n\r\n    removeProductFromCart(state, action: PayloadAction<RemoveProduct>) {\r\n      state.items = state.items.filter((item) => item.id !== action.payload.id);\r\n      state.totalPrice -= action.payload.price;\r\n    },\r\n\r\n    clearAllProducts(state) {\r\n      state.items.length = 0;\r\n      state.totalPrice = 0;\r\n    },\r\n  },\r\n});\r\n\r\nexport const { addProductInCart, removeProductFromCart, clearAllProducts, minusProduct } =\r\n  cartSlice.actions;\r\nexport default cartSlice.reducer;\r\n"],"mappings":"6KAAA,OAASA,WAAW,KAAuB,kBAAkB,CAC7D,OAASC,aAAa,KAAQ,2BAA2B,CACzD,OAASC,eAAe,KAAQ,6BAA6B,CAG7D,IAAAC,cAAA,CAA8BF,aAAa,CAAC,CAAC,CAArCG,KAAK,CAAAD,cAAA,CAALC,KAAK,CAAEC,UAAU,CAAAF,cAAA,CAAVE,UAAU,CAEzB,GAAM,CAAAC,YAA4B,CAAG,CACnCD,UAAU,CAAEA,UAAU,CACtBD,KAAK,CAAEA,KACT,CAAC,CAED,GAAM,CAAAG,SAAS,CAAGP,WAAW,CAAC,CAC5BQ,IAAI,CAAE,MAAM,CACZF,YAAY,CAAZA,YAAY,CACZG,QAAQ,CAAE,CACRC,gBAAgB,UAAAA,iBAACC,KAAK,CAAEC,MAA+B,CAAE,CACvD,GAAM,CAAAC,QAAQ,CAAGF,KAAK,CAACP,KAAK,CAACU,IAAI,CAAC,SAACC,IAAI,QAAK,CAAAA,IAAI,CAACC,EAAE,GAAKJ,MAAM,CAACK,OAAO,CAACD,EAAE,GAAC,CAC1E,GAAIH,QAAQ,CAAE,CACZA,QAAQ,CAACK,KAAK,EAAE,CAClB,CAAC,IAAM,CACLP,KAAK,CAACP,KAAK,CAACe,IAAI,CAAAC,aAAA,CAAAA,aAAA,IACXR,MAAM,CAACK,OAAO,MACjBC,KAAK,CAAE,CAAC,EACT,CAAC,CACJ,CAEAP,KAAK,CAACN,UAAU,CAAGH,eAAe,CAACS,KAAK,CAACP,KAAK,CAAC,CACjD,CAAC,CAEDiB,YAAY,UAAAA,aAACV,KAAK,CAAEC,MAA6B,CAAE,CACjD,GAAM,CAAAC,QAAQ,CAAGF,KAAK,CAACP,KAAK,CAACU,IAAI,CAAC,SAACC,IAAI,QAAK,CAAAA,IAAI,CAACC,EAAE,GAAKJ,MAAM,CAACK,OAAO,GAAC,CACvE,GAAIJ,QAAQ,CAAE,CACZA,QAAQ,CAACK,KAAK,EAAE,CAChBP,KAAK,CAACN,UAAU,EAAIQ,QAAQ,CAACS,KAAK,CACpC,CACF,CAAC,CAEDC,qBAAqB,UAAAA,sBAACZ,KAAK,CAAEC,MAAoC,CAAE,CACjED,KAAK,CAACP,KAAK,CAAGO,KAAK,CAACP,KAAK,CAACoB,MAAM,CAAC,SAACT,IAAI,QAAK,CAAAA,IAAI,CAACC,EAAE,GAAKJ,MAAM,CAACK,OAAO,CAACD,EAAE,GAAC,CACzEL,KAAK,CAACN,UAAU,EAAIO,MAAM,CAACK,OAAO,CAACK,KAAK,CAC1C,CAAC,CAEDG,gBAAgB,UAAAA,iBAACd,KAAK,CAAE,CACtBA,KAAK,CAACP,KAAK,CAACsB,MAAM,CAAG,CAAC,CACtBf,KAAK,CAACN,UAAU,CAAG,CAAC,CACtB,CACF,CACF,CAAC,CAAC,CAEK,IAAAsB,kBAAA,CACLpB,SAAS,CAACqB,OAAO,CADJlB,gBAAgB,CAAAiB,kBAAA,CAAhBjB,gBAAgB,CAAEa,qBAAqB,CAAAI,kBAAA,CAArBJ,qBAAqB,CAAEE,gBAAgB,CAAAE,kBAAA,CAAhBF,gBAAgB,CAAEJ,YAAY,CAAAM,kBAAA,CAAZN,YAAY,CAClE,OAAAX,gBAAA,CAAAa,qBAAA,CAAAE,gBAAA,CAAAJ,YAAA,EACpB,cAAe,CAAAd,SAAS,CAACsB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}